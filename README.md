#  FlatBuffers Project: Property Tree 

This C++ toy project implement some simple functions to support property tree synchronization using Google's FlatBuffer.

## Features:
- Implements a schema that can represent a property tree (a vector of properties)
- Read/Update on the property object generated by the FlatBuffers compiler
- Send/Receive the property object over TCP socket
- Use the reflection API to read from the TCP socket and iterate over the elements stored inside the property tree

## Solution to synchronization
1. Add a version number to the table PropertyTree
2. Add this field when creating a PropertyTree
```cpp
flatbuffers::Offset<PropertyTree> pt_offset = CreatePropertyTree(builder, 0, builder.CreateVector(properties_offsets));
```
3. Add 1 to the version number when update
```cpp
uint64_t new_version = pt->version() + 1;
auto updated_pt_offset = CreatePropertyTree(builder, new_version, updated_properties_offset);
```
4. Always send the latest version of property tree on the sender side
5. On the receiver side, when receiving a property later than the local one, replace the local one with the later property tree.
```cpp
if (received_version > local_version) {
    // Update the local property tree and version number
    local_property_tree_buffer = std::move(received_property_tree_buffer);
    local_version = received_version;
}
```

## Dependencies
- FlatBuffers: https://github.com/google/flatbuffers

## Local Environment
IDE:Xcode Version 14.2 (Operating System: MacOS Ventura 13.2.1)

